(()=>{"use strict";const e=(e,t)=>{const o=(e,t,o="")=>{const c=document.createElement(e);return c.classList.add(t),c.textContent=o,c};return{name:e,displayNewProject:()=>{const c=document.createElement("li");return c.classList.add("project-item"),c.textContent=e,(e=>{e.addEventListener("click",(()=>{const c=document.querySelector(".display-board"),n=document.querySelector(".todo-lists");(e=>{for(;e.firstChild;)e.removeChild(e.firstChild)})(n);const d=o("div","done");d.classList.add("todos-container");const s=o("div","undone");s.classList.add("todos-container");const r=o("h3","done-title","Done");d.insertBefore(r,d.firstChild);const i=o("h3","undone-title","To Do");s.insertBefore(i,s.firstChild),n.appendChild(d),n.insertBefore(s,n.firstChild),c.classList.add("active-board");const a=(e=>{const t=document.createElement("h2");return t.classList.add("project-title"),t.textContent=e.textContent,t})(e);n.insertBefore(a,n.firstChild),(e=>{const o=t().filter((t=>t.project===e.textContent));o&&o.forEach((e=>{e.displayNewTodo()}))})(e)}))})(c),c}}},t=(e,t,o,c,n,d,s,r,i)=>{function a(e){const t=document.querySelectorAll(".todos-container");t[0].contains(e)?t[0].removeChild(e):t[1].removeChild(e)}function l(e,t){const o=document.createElement("p");if(o.classList.add(`${e}-field`),o.classList.add("card-field"),"checklist"===e){if(!0===t.checklist)return o;let e=document.createElement("input");e.classList.add("checkbox-card"),e.setAttribute("type","checkbox"),e=function(e,t){return e.addEventListener("click",(()=>{t.checklist=!0,r(t),a(e.closest(".todo-card")),t.displayNewTodo()})),e}(e,t),o.appendChild(e)}else o.innerHTML=`<span class="${e}-span">${c=e,c.charAt(0).toUpperCase()+c.slice(1)}: </span> <span class='${e}-${t.priority} ${e}-card'> ${t[e]}</span>`;var c;return o}return{title:e,description:t,dueDate:o,priority:c,notes:n,checklist:d,project:s,generateTodoTags:function(){const e=[];return["title","description","dueDate","priority","notes","checklist"].forEach((t=>{e.push(l(t,this))})),e},displayNewTodo:function(){let e=document.createElement("div");e=function(e,t){switch(e.priority){case"High":t.classList.add("high-priority");break;case"Medium":t.classList.add("medium-priority");break;default:t.classList.add("low-priority")}return t}(this,e);const t=document.createElement("button");t.classList.add("remove-button"),t.innerHTML="<span>&times;</span>",t.addEventListener("click",(()=>{a(t.closest(".todo-card")),i(this)})),e.appendChild(t);const o=document.createElement("span");o.innerHTML="<i class='fas fa-edit edit-button'></i>",o.addEventListener("click",(()=>{const e=o.closest(".todo-card");let t=[];const c=e.querySelector(".title-card");t.push(c);const n=e.querySelector(".description-card");t.push(n);const d=e.querySelector(".dueDate-card");t.push(d);const s=e.querySelector(".notes-card");t.push(s),t.forEach((e=>{const t=e.textContent,o=e.classList;e.innerHTML=e===d?`<input type='date' placeholder='${t}' class='edit-input ${o[1]}-edit'>`:`<input type='text' placeholder='${t}' class='edit-input ${o[1]}-edit'>`})),e.removeChild(e.lastChild);const i=document.createElement("button");i.classList.add("save-button"),i.innerHTML="<span>Save</span>",i.addEventListener("click",(()=>{const t=e.querySelector(".title-card-edit").value,o=e.querySelector(".description-card-edit").value,i=e.querySelector(".dueDate-card-edit").value,a=e.querySelector(".notes-card-edit").value;this.title=t,this.description=o,this.dueDate=i,this.notes=a,r(this),e.removeChild(e.lastChild);const u=l("checklist",this);u.classList.add("checkbox-card"),e.appendChild(u),c.textContent=this.title,n.textContent=this.description,d.textContent=this.dueDate,s.textContent=this.notes})),e.appendChild(i)})),e.appendChild(o),e.classList.add("todo-card"),this.generateTodoTags().forEach((t=>{e.appendChild(t)})),function(e,t){const o=document.querySelector(".undone"),c=document.querySelector(".done");!1===e.checklist?o.appendChild(t):c.appendChild(t)}(this,e)}}},o=(()=>{let c,n;const d=()=>(c=JSON.parse(localStorage.getItem("projectarr")),c=c?c.map((t=>e(t.name,o.getTodoListArr))):[],c),s=e=>{const t=n.indexOf(e);n[t]=e,localStorage.setItem("todolistarr",JSON.stringify(n))},r=e=>{const t=n.indexOf(e);n.splice(t,1),localStorage.setItem("todolistarr",JSON.stringify(n))};return{getProjectArr:d,getTodoListArr:()=>(n=JSON.parse(localStorage.getItem("todolistarr")),n=n?n.map((e=>t(e.title,e.description,e.dueDate,e.priority,e.notes,e.checklist,e.project,s,r))):[],n),addProject:e=>{c.push(e),localStorage.setItem("projectarr",JSON.stringify(c))},addTodo:e=>{n.push(e),localStorage.setItem("todolistarr",JSON.stringify(n))},savedProjects:()=>{const e=document.querySelector(".list");d().length>0&&d().forEach((t=>{e.appendChild(t.displayNewProject())}))},updateTodo:s,deleteTodo:r}})(),c=o,n=document.querySelector(".new-project"),d=document.querySelector(".new-project-input"),s=document.querySelector(".projects"),r=document.querySelectorAll(".submit-todo"),i=document.querySelector(".list");n.addEventListener("click",(()=>{if(n.classList.toggle("active-btn"),d.classList.toggle("active-input"),"Add Project"===n.textContent?n.textContent="New Project":n.textContent="Add Project",d.value){const t=e(d.value,c.getTodoListArr),o=t.displayNewProject();c.addProject(t),i.appendChild(o),s.querySelector("form").reset()}})),r.forEach((e=>{e.addEventListener("click",(()=>{const e=document.getElementById("title").value,o=document.getElementById("description").value,n=document.getElementById("due-date").value,d=document.getElementById("check").checked,s=document.getElementById("notes").value,r=document.getElementById("priority").value,i=document.querySelector(".project-title").textContent,a=document.querySelector(".add-todo-form"),l=t(e,o,n,r,s,d,i,c.updateTodo,c.deleteTodo);l.displayNewTodo(),c.addTodo(l),a.reset()}))})),c.savedProjects()})();